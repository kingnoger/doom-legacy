<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="description" content="New, even better Doom Legacy" />
<meta name="keywords" lang="en" content="doom, legacy, fps, heretic, hexen" />
<link rel="stylesheet" href="legacy.css" type="text/css" />
<title>Compiling Doom Legacy</title>
</head>

<!-- $Id$ -->
<body>

<h1>How to compile Doom Legacy 2.0 (SDL version)</h1>

<p>In order to compile Doom Legacy 2.0 SDL you'll need to have several
libraries installed on your system.<br />
Make sure you install the "developer" packages of the
libraries, which include both the runtime libraries (DLLs) and
the stuff required during compilation (header files and import libraries).</p>

<table>
<tr><th>Library</th><th>Version</th><th>Description</th></tr>
<tr><td><a href="http://www.libsdl.org/">SDL</a></td> <td>1.2.10+</td>
 <td>Simple DirectMedia Layer. A multiplatform multimedia library.</td></tr>
<tr><td><a href="http://www.libsdl.org/projects/SDL_mixer/">SDL_mixer</a></td> <td>1.2.7+</td>
 <td>A multichannel mixer library based on SDL.</td></tr>
<tr><td><a href="http://www.zlib.org/">zlib</a></td> <td>1.1.4+</td>
 <td>A free compression library.</td></tr>
<tr><td><a href="http://www.libpng.org/pub/png/libpng.html">libpng</a></td> <td>1.2.5+</td>
 <td>The official PNG reference library.</td></tr>
<tr><td><a href="http://www.ijg.org/">libjpeg</a></td> <td>6b</td>
 <td>The unofficial JPEG reference library.</td></tr>
<tr><td><a href="http://www.opentnl.org/">OpenTNL</a></td> <td>HEAD revision</td>
 <td>A free game networking library based on the Torque Network Library.<br />
 The OpenTNL distribution contains <b>libtomcrypt</b>, which provides strong encryption.</td></tr>
</table>

<p>
You might also find the following programs useful:
</p>

<ul>
<li>GCC 4, the Gnu Compiler Collection which, among other things, is
a C/C++ compiler.<br />
Linux systems most likely already have it installed.<br />
Windows users should install <a href="http://www.mingw.org/">MinGW</a>, a
GCC port, and <a href="http://www.mingw.org/msys.shtml">MSYS</a>, a
collection of POSIX utilities for Win32.</li>

<li><a href="http://www.doxygen.org/">Doxygen</a>, an automatic
source documentation system.</li>
</ul>

<p>
Finally, download the Doom Legacy
<a href="http://sourceforge.net/projects/doomlegacy/">source</a>.
You can either get the source package or, for the latest code
snapshot, checkout the <b>legacy/trunk/</b> directory from the Subversion
repository:
<div class="code">svn co https://svn.sourceforge.net/svnroot/doomlegacy/legacy/trunk some_local_dir</div>
From now on, your local copy of this directory will be referred to as <b>TRUNK</b>.
</p>

<h3>Compiling OpenTNL</h3>

<p>
Unfortunately, this step is more complicated than it should be.
</p>
<ol>
<li>Download latest OpenTNL source from the CVS:
<div class="code">cvs -z3 -d:pserver:anonymous@opentnl.cvs.sourceforge.net:/cvsroot/opentnl co -P tnl</div>
</li>
<li>Apply the <b>TRUNK/libtnl_patch.diff</b> patch to the OpenTNL source.</li>
<li>Follow the OpenTNL compilation instructions.</li>
<li>Move the libraries <b>libtnl.a</b> and <b>libtomcrypt.a</b> you
just built somewhere the linker can find them, e.g. the
TRUNK.</li>
<li>Create a symbolic link named <b>tnl</b> in the <b>TRUNK/include</b> directory,
pointing to the directory containing the OpenTNL headers.</li>
</ol>

<h3>Compilation and linking</h3>

<ol>
<li>Open a shell window. Go to the TRUNK.</li>
<li>Say '<b>make depend</b>' to create the dependency files.</li>
<li>Say '<b>make OPT=1</b>' or just 'make' to build the executable.<br />
 Omitting the 'OPT=1' parameter adds debugging symbols to the
 executable.</li>
<li>Copy the file <b>legacy.wad</b> (or <b>legacy.dat</b>, after
renaming it legacy.wad) from Doom Legacy version 1.40 (or later) to TRUNK.<br/>
Say '<b>make wad</b>' to generate an updated legacy.wad, which can be found
in the directory <b>TRUNK/wad/</b>. Copy it to the same directory as
the Legacy executable.<br/>
</li>
<li>Say '<b>make docs</b>' to generate the Doxygen documentation.</li>
</ol>

</body>
</html>
