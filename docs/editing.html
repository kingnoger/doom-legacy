<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="description" content="New, even better Doom Legacy" />
<meta name="keywords" lang="en" content="doom, legacy, fps, heretic, hexen" />
<link rel="stylesheet" href="legacy.css" type="text/css" />
<title>Doom Legacy Map Author's Reference</title>
</head>

<!-- $Id$ -->
<body>

<h1>Doom Legacy Map Author's Reference</h1>
<h1 class="tagline">Version 2.0</h1>

<h2>Contents</h2>

<ol>
<li><a href="#basics">Editing Basics</a><ul>
<li><a href="#datafiles">Legacy data files</a></li>
</ul></li>

<li><a href="#maps">Maps</a><ul>
<li><a href="#MAPINFO">The MAPINFO lump</a></li>
<li><a href="#levelinfo">LevelInfo lumps</a></li>
<li><a href="#mapformats">Map formats</a></li>
<li><a href="#thing">New THING types</a></li>
<li><a href="#linedef">New LINEDEF types</a></li>
<li><a href="#3dfloors">3D floors and water</a></li>
</ul></li>

<li><a href="#media">Media</a><ul>
<li><a href="#textures">Textures</a></li>
<li><a href="#sprites">Sprites</a></li>
<li><a href="#models">3D models</a></li>
<li><a href="#colormaps">Colormaps et al.</a></li>
<li><a href="#sound">Sound</a></li>
<li><a href="#music">Music</a></li>
</ul></li>

<li><a href="#advanced">Advanced topics</a><ul>
<li><a href="#scripting">Scripting</a></li>
<li><a href="#DECORATE">DECORATE</a></li>
<li><a href="#dehacked">DeHackEd and BEX</a></li>
</ul></li>

<li><a href="#legacy.wad">Legacy.wad contents</a></li>
</ol>


<hr />
<h1><a name="basics">Editing Basics</a></h1>
<p>
This section explains the basic things you need to know if you want to edit or
author Doom Legacy maps.
</p>

<h2><a name="datafiles">Legacy data files</a></h2>
<p>
The original Doom stores all game data (maps, graphics, sounds) in data
archives called WAD files.
The WAD format is somewhat restricting, mainly due to
the 8 character lumpnames and the lack of internal directory structure
or compression.
More recent games have introduced other data archive formats which remedy
some of these shortcomings.
In addition to WADs, Legacy understands the WAD2/3, PAK and ZIP/PK3 file formats.
Data files are included in the game using the commandline switch <b>-file</b>:
<span class="example">-file &lt;filename1&gt; [filename2...]</span>
</p>
<p>
You can also use normal directories to emulate data files by entering the name of
a directory after the <b>-file</b> switch. The name must end with a slash (/).
In this case, each file within the directory emulates a lump. This
can be very useful while testing new textures, sounds etc.
Since there is no universally defined ordering
among the files in a directory, you cannot load maps (which consist of
several lumps in a very specific order) from them.
</p>
<p>
Finally, the <b>-file</b> switch also accepts files whose name ends with ".lmp".
They will be treated as single lumps whose name is given by the filename (minus
the ".lmp").
</p>

<h3>Which data file format to use?</h3>
<p>
The WAD2/3 and PAK formats are only meant to be used if you want to use an
existing data archive and don't want to repackage it.
When creating something new from scratch, the question boils down to choosing
between WAD and ZIP. ZIP archives have three main advantages over WADs:
</p>
<ol>
<li>DEFLATE compression. ZIPs are generally smaller in size than corresponding WADs.</li>
<li>Almost arbitrarily long lumpnames and directory-like structures.
However, because most resource names in the Doom/Hexen map format are
limited to 8 characters, this feature is of limited use.</li>
<li>One does not need WAD editing tools to make ZIP archives, any ZIP program will do.</li>
</ol>
<p>They also have a disadvantage:</p>
<ol>
<li>Slight performance penalty due to having to decompress the lumps when they
are used.</li>
</ol>
<p>
NOTE: Modern data formats such as PNG, JPEG, MP3 or Ogg Vorbis already are
compressed and you will not get any further benefit by recompressing them.
Thus, if you only want to do a texture package with PNG and JPEG textures, for
example, a WAD file is generally a better choice than a ZIP file.
However, if you can force your zipping program just to "store" already
compressed files in the ZIP file without compressing ("deflating") them again,
the ZIP format will be as efficient as a WAD.
With the UNIX commandline tool <b>zip</b> you do this using the -n switch.
</p>

<hr />
<h1><a name="maps">Maps</a></h1>
<p>
This section explains how Legacy maps can differ from Vanilla Doom ones.
</p>

<h2><a name="mapformats">Map formats</a></h2>
<p>
Legacy understands both Doom and Hexen map formats.
If a map has a BEHAVIOR lump (even an empty one), it is assumed to be in Hexen format.
You can freely mix the formats in a map WAD, i.e. have some of the maps
in Doom format and others in Hexen format.
</p>
<p>
The only difference between Doom and Hexen map formats is in the
THINGS and LINEDEFS lumps, which have a different structure and
content in the Hexen format.
Legacy includes a utility console command
for converting Doom-format maps to Hexen format:
</p>
<div class="example">convertmap &lt;maplumpname&gt;</div>
<p>
The converted lumps are written on disk with the names
&lt;maplumpname&gt;_THINGS.lmp and
&lt;maplumpname&gt;_LINEDEFS.lmp.<br/>
You can then replace the original THINGS and LINEDEFS lumps in the WAD
with the converted versions using almost any WAD editor.
</p>
<p>
Boom and Heretic maps follow the Doom map format, only some
THING and LINEDEF numbers have new meanings. Legacy's default
interpretation of the THING and LINEDEF numbers depends on the IWAD
used.
</p>

<h2><a name="MAPINFO">The MAPINFO lump</a></h2>
<p>
MAPINFO is a special plaintext lump, introduced in Hexen, extended by
ZDoom and later the JDS group, that fixes many shortcomings of the map
format and can be used <i>inter alia</i> to create custom map
orderings and hubs within the WAD.
Legacy follows the <a href="JDS_MAPINFO.html">JDS MAPINFO standard</a>.
</p>
<p>
There is some overlap in the functionality of the MAPINFO lump and
the <a href="#levelinfo">LevelInfo</a> lumps. We suggest that you use
MAPINFO whenever you can, and LevelInfo when you must.
</p>
<p>
Usually there should be only one MAPINFO lump per wad, containing entries for
each map and cluster in the game.<br/>
For examples of MAPINFO lumps, see the <b>MI_*</b> lumps
in legacy.wad.
For instance, <a href="../resources/MAPINFO_Doom.txt">this lump</a>
recreates the original Doom episodes.
</p>

<h2><a name="levelinfo">LevelInfo lumps</a></h2>
<p>
The LevelInfo lumps are plain text files, stored
in the <b>map separator lump</b>, which has the same name as the map
(e.g. E1M4, MAP21) and is normally empty.
Each map can have its own LevelInfo. The lump consists of
one or more <b>blocks</b>. Each block begins with
</p>
<div class="example">
[this is a blockname]&lt;\n&gt;
</div>
<p>
and ends when the next block begins, or when the lump ends.
The recognized blocks are
<b>[level info]</b>, <b>[scripts]</b> and <b>[intertext]</b>.
</p>


<h3>[level info]</h3>

<p>
This block holds information concerning the entire map.
It consists of commands, one per line.
</p>

<table class="def">
<tr><th>[level info] command</th><th>effect</th></tr>

<tr><td>consolecmd &lt;expr&gt;</td>
<td>
<b>Deprecated</b>. Execute a <a href="console.html">console expression</a> after loading the map.
</td></tr>

<tr><td class="warning" colspan="2">
<b>Deprecated commands</b>, use <a href="#MAPINFO">MAPINFO</a> instead.
</td></tr>

<tr><td>name &lt;nicename&gt;</td>
<td>
Sets the full name of the map (e.g. "Mission Control"):
</td></tr>

<tr><td>version &lt;string&gt;</td>
<td>
Map version.
</td></tr>

<tr><td>author &lt;name&gt;</td>
<td>
Name of the map author.
</td></tr>

<tr><td>description &lt;string&gt;</td>
<td>
An additional string, which can be a map description, hint,
recommendation etc.
</td></tr>

<tr><td>partime &lt;n&gt;</td>
<td>
Map partime (in seconds).
</td></tr>

<tr><td>music &lt;lumpname&gt;</td>
<td>
Sets the music played in the map.
</td></tr>

<tr><td>gravity &lt;float&gt;</td>
<td>
Sets the acceleration of gravity in the map. Default is 1.0.
</td></tr>
</table>


<h3>[scripts]</h3>

<p>
This block contains the <a href="fs.html">FraggleScript</a> scripts of
the map.
</p>

<h3>[intertext]</h3>

<p>
Contains the text to be shown after the map is exited. "\n" is the
newline character.
</p>



<h2><a name="thing">New THING types</a></h2>
<p>
The Doom (and Hexen) map format refers to different types of THINGs
(a.k.a. mapthings, map objects, mobjs) by unsigned 16-bit codes,
known as DoomEd numbers. Doom, Heretic and Hexen all use
different numberings, with the number ranges overlapping in some
places.
The situation has been made even more complicated by the different
Doom source ports introducing their own, often conflicting, special THING types.
</p>
<p>
Legacy tries to honor the most common "new" thing types, especially
those introduced by Boom and SMMU.
<!-- TODO sound sequences  (ambient/local/sector action) 4000-7999 -->
</p>

<table class="def">
<tr><th>THING type</th><th>description</th><th>origin</th></tr>
<tr><td>4001-4028</td>
<td>Playerstarts for players 5-32.</td><td>Boom</td>
</tr>

<tr><td>5001, 5002</td>
<td>Point push and pull effects</td><td>Boom</td>
</tr>

<tr><td>5003</td>
<td>Camera location</td><td>SMMU</td>
</tr>

<tr><td>5004</td>
<td>Path node</td>
</tr>

<tr><td>500x</td>
<td>TODO Teamstartsec</td>
</tr>


<tr><td>8090</td>
<td>Skybox Viewpoint</td><td>ZDoom</td>
</tr>

<tr><td>8091</td>
<td>Skybox Picker</td><td>ZDoom</td>
</tr>


<tr><td>9300</td>
<td>Polyobj anchor</td><td>ZDoom</td>
</tr>

<tr><td>9301</td>
<td>Polyobj spawn spot</td><td>ZDoom</td>
</tr>

<tr><td>9302</td>
<td>Crushing polyobj spawn spot</td><td>ZDoom</td>
</tr>
</table>


<h2><a name="linedef">New LINEDEF types</a></h2>
<p>
Legacy supports all Boom linedef types. For the details, see
the <a href="boomref.html">Boom reference</a>.<br/>
Additionally, we have introduced a number of our own additions to the
Doom linedef system. These additions are also available in Hexen-format
maps through the Hexen linedef type <b>150</b>, see below.
</p>
<p>
In Doom-format maps, we have introduced a new linedef flag, <span class="keyword">Alltrigger [0x400] (1024)</span>
This flag, when set, will allow all things to activate a W* line, with
the exception of flying blood. :) This includes all generalized types
that are W*.
</p>

<h3>FraggleScript triggers</h3>

<table class="def">
<tr><th>LINEDEF type</th><th>effect</th></tr>
<tr><td>272</td>
<td>Start FS script (tagnumber), WR
</td></tr>
<tr><td>273</td>
<td>Start FS script (tagnumber), WR, 1-sided
</td></tr>
<tr><td>274</td>
<td>Start FS script (tagnumber), W1
</td></tr>
<tr><td>275</td>
<td>Start FS script (tagnumber), W1, 1-sided
</td></tr>
<tr><td>276</td>
<td>Start FS script (tagnumber), SR
</td></tr>
<tr><td>277</td>
<td>Start FS script (tagnumber), S1
</td></tr>
<tr><td>278</td>
<td>Start FS script (tagnumber), GR
</td></tr>
<tr><td>279</td>
<td>Start FS script (tagnumber), G1
</td></tr>
</table>


<h3>Visual effects</h3>

<table class="def">
<tr><th>LINEDEF type</th><th>effect</th></tr>

<tr><td>280</td>
<td><b>Swimmable Boom water:</b><br/>
<p>
This type works like Boom's 242 type but with major differences. 280's
water is swimmable (using the Legacy swimming code), and it operates
more like water than 242 does.
</p>
<p>
With 280, water is only shown if it is above the target sector's
floor; otherwise, the regular floor is rendered. When water is
rendered, the properties for top of the water "plane" and the bottom,
are both taken from the control sector's floor.
The lightlevel of the water is controlled by the target sector's
lightlevel unless the target sector has been also tagged to a
"Transfer floor properties" linedef, in which case, the water will
have that lightlevel.
</p>
<p>
280 also puts colormaps in the targeted sectors, based on the
upper/lower/middle textures.
NOTE: 280 will also create a fake ceiling if the control ceiling is
lower than the target ceiling (this is usually not desired).
</p>
</td></tr>


<tr><td>282</td>
<td><b>Easy colormap/fog effect:</b><br/>
This type sets the colormaps of all tagged sectors as described
below, without changing the floor/ceiling or light values. This is
nice for putting colored lighting in many different sectors of
different floor/ceiling heights. The colormaps are generated by Legacy
at runtime.

<table>
<tr><th>Texture</th><th>Value</th><th>Effect</th></tr>

<tr><td>upper</td><td>#rrggbba</td>
<td>6 hex chars giving the color value in RGB format of the colormap mask,
1 alphanumeric char (a-z) denoting the amount of the colormap mask.</td></tr>

<tr><td>middle</td><td>#abbcc</td>
<td>a = boolean value (0 or 1) denoting if this particular colormap should be treated like fog (i.e. equal application of colormap to all walls, etc.)
bb = numerical value (0-32) of the colormap at which the fade begins
cc = numerical value (1-33) of the colormap at which the destination
color will be reached. (not yet supported in hardware mode)
</td></tr>

<tr><td>lower</td><td>#rrggbb</td>
<td>6 hex chars denoting the color the colormap will fade to.
(not yet supported in hardware mode)
</td></tr>
</table>
</td></tr>


<tr><td>283</td>
<td><b>Fog sheet:</b><br/>
The middle texture will be rendered as if fully
transparent, only applying the relevant colormap to anything that is
seen through it.
This can be used to make a better fog effect by applying it to the
linedefs connecting sectors with different &quot;fogginess&quot;.
Because you usually will not want this
effect on both sides of the line, this linedef will only affect sides
with a middle texture.
</td></tr>


<tr><td>284-288</td>
<td>
<b>Software translucency:</b><br/>
These linedefs each apply a different translucency map to the middle
texture. The corresponding <a href="#transmap">translucency maps</a> are
stored in <a href="#legacy_transmaps">legacy.wad</a>.<br/>
<br/>
284 - TRANSMED: Brightens everything behind the line. Turns things kinda green though.<br/>
285 - TRANSMOR: Less brightness with a lot less green.<br/>
286 - TRANSHI: Darkens a little with no green tint.<br/>
287 - TRANSFIR: Brightens but with no green tint.<br/>
288 - TRANSFX1: Selective translucency. Only certain colors are translucent.<br/>
</td></tr>
</table>



<h3>Fake floors, aka 3D floors</h3>

<p>
These are one of Doom Legacy's most interesting features.
Despite the name, they are quite real parts of the map geometry.
Each sector can contain multiple fake floors.
A fake floor is defined by its bottom and top heights, the horizontal
dimensions of the sector it is in, and its type.
The volume inside the fake floor can be filled with solid, swimmable
water, fog etc.
</p>
<p>
A fake floor is created using a <b>control sector</b>.
It is (usually) a simple small triangular sector which is not connected to
the rest of the map. One of the linedefs surrounding the control
sector is then tagged and given a specific type from the list below.
This causes all sectors equipped with the same tag to contain a fake
floor which will conform to the shape of the sector it is in.
</p>
<p>
The bottom and top heights of the fake floor are determined by the
floor and ceiling heights of the control sector. Likewise,
the bottom and top textures of the fake floor are the floor and
ceiling textures of the control sector.
The middle texture of the linedef creating the fake floor is used 
for the texture along the sides.
Furthermore, the lightlevel and colormap <i>under</i> the fake floor
correspond to the lightlevel and colormap of the control sector.
Note that the shape of the control sector has no effect on the fake floor.
</p>

<table class="def">
<tr><th>LINEDEF type</th><th>effect</th></tr>
<tr><td>281</td>
<td>
Opaque solid 3D floor.
</td></tr>

<tr><td>289</td>
<td>
Opaque solid 3D floor which does not change the lighting conditions below it.
</td></tr>

<tr><td>300</td>
<td>
Translucent solid 3D floor. 
Upper texture field holds the alpha value: [#000..#255] (#000 = transparent, #255 = opaque. Default value is #127)
</td></tr>

<tr><td>306</td>
<td>
Invisible solid 3D floor.
</td></tr>

<tr><td>301</td>
<td>
Translucent swimmable water. Upper texture field holds the alpha value.
</td></tr>

<tr><td>304</td>
<td>
Opaque swimmable water.
</td></tr>

<tr><td>302</td>
<td>
Volumetric fog, uses the control sector's colormap.
</td></tr>

<tr><td>303</td>
<td>
3D light at control sector's ceiling height.
</td></tr>

<tr><td>305</td>
<td>
3D light at control sector's ceiling and floor height.
</td></tr>
</table>


<h3>Hexen-format maps</h3>
<p>
All the new linedef types can also be used in Hexen-format maps.
We have extended the Hexen linedef system by one new type, 150.
Under this type, the arg1 and arg2 fields determine the subtype of the effect.
Also, you can use full 16-bit tags with linedeftype 150.
arg4 holds the low byte and arg5 the high byte of the tag.
</p>
<table class="def">
<tr><th>LINEDEF type</th><th>arg1</th><th>arg2</th><th>effect</th></tr>

<tr><td rowspan="8">150</td><td rowspan="4">4: Exotic use of texture names</td><td>1</td>
<td>Boom 242</td></tr>
<tr><td>2</td><td>Boom 260</td></tr>
<tr><td>3</td><td>Legacy 280</td></tr>
<tr><td>4</td><td>Legacy 282</td></tr>

<tr><td>10: Fake floors</td><td>type</td>
<td>Doom linedef type = type + 281</td></tr>

<tr><td rowspan="2">11: Renderer effects</td><td>0</td>
<td>Fog sheet</td></tr>

<tr><td>100+n</td>
<td>Software translucency: transmap n</td></tr>

<tr><td>128: FraggleScript trigger</td><td>onesided</td>
<td>If onesided is 1, line can only be activated from the first side.</td></tr>
</table>



<h2><a name="3dfloors">3D floors and water</a></h2>
<p>
The concept of true 3d in Doom Legacy.
By Steven McGranahan.
</p>

<h3>Chapter 1: The Beginning</h3>

<p>
Close to a year ago, the DosDoom team shocked the Doom community with an
animated gif of a doom level with a real, true 3d bridge that the player
could go under and over. Now, DosDoom has become EDGE and true 3D has become
one of it's main features. The method EDGE uses for it's true 3D is a very
simple and powerful one. It is capable of doing much more than just sector
over sector, with EDGE's 3D, the level designer can create complex 3D structures
and architecture.
</p>
<p>
About 8 months ago, I began a series of experiments that were designed
to simulate true 3D in my favorite Doom source port, Doom Legacy. These
coding experiments eventually lead me to create invisible solid regions
in a sector that objects could stand on top of and below. Then the DosDoom
team released their source code and I downloaded it to try to copy the
rendering code for 3D floors to complete the invisible ones I had made.
Probably 4 attempts at this failed just miserably, and I gave up on rendering
3D floors (I had also made several attempts to turn Legacy's translucent
water into 3D floors, but without success).
</p>
<p>
Legacy would not be able to render 3D floors until DosDoom became EDGE
and the source was released. When the EDGE team released the code, I saw
some of the pictures of things they had done with 3D floors and I knew
that I had to try again. So I began to copy the code once again, and this
time, was successful. Now, EDGE used GLBSP for rendering levels (even in
software) which meant that the code it used to render them with the normal
Doom BSP was outdated and very limited (only one 3D floor per sector, they
did not effect lighting, and sprites were not sorted with 3D floors correctly)
and thus it was up to me to bring this code up to date. This is what I
have been doing that last 6 months.
</p>
<p>
So far I have managed to increased the 3D floor plane limit and the 3D
side limit to 20, I have made it possible for 3D floors to cast shadows
on the surrounding walls, and floors, and I have made a much better sprite
sorting system (although it is still flawed). In fact, about 80% of the
3D floor code is now my code from scratch.
</p>

<h3>Chapter 2: The lowdown</h3>

<p>
So you want to know how things work, eh? Well, first I would like to state
that 3D floors in Legacy are not perfect. They are plagued by bugs in the
original Doom rendering system, and many visual bugs you may notice are
not fixable unless I overhaul the rendering system (which is probably not
going to happen). These bugs, however, are now very few and far between,
and if you are careful, you can avoid most bugs.
</p>
<p>
There are known speed issues. A 3D floor (as of 01/10/2001) will slowdown
Legacy about as much as adding 3 sectors. That is to say, every 3D floor
that is tagged to a sector so tagging a 3D floor to, say, 3 sectors, will
slow down the game about as much as if you added 9 sectors to the map.
I will explain in greater detail later on, what exactly causes the game
slowdown and how to minimize it.
</p>

<h3>Chapter 3: Your first level with 3D floors</h3>

<p>
Ok, you want to put a 3D floor into your level? Ok. First, I want you to
understand that I am not here to teach anyone how to use their editor of
choice. You need to understand how to tag a line to a sector and how to
set a linedef type.
</p>
<p>
First, build a small, 5 sector level to match the image below (NOTE: These
shots were taken using a now defunct level editor called DIE (R.I.P.) which
is not available any more, which is ok because it never really got anywhere
but WA is crashing for some really weird reason so I'm using DIE to take
screen shots) heh.
<img src="3dlvl1.png" height="301" width="329" alt="example"/>
Note: I added the line lengths myself.
</p>
<p>
Sectors A and B should have a floor height of 0, a ceiling height of 128,
and a light level of 255. Sectors C, D, and E, should have a ceiling height
of 128, a floor height of -64, a light level of 255 and make the floor
texture something painful (like lava or nukage). Now, texture everything
in and add a player to the left-hand sector and run the map. If you chose
the same textures as me then it should look something like this:
<img src="3dlvl2.png" height="200" width="320" alt="example"/>
</p>
<p>
OK, so now we need a bridge across the lava. Now we could just raise the
floor of sector C to accommodate our marine. However, this method of creating
a bridge really sucks because it doesn't allow for passage UNDER the bridge,
so we are going to create a 3D bridge to get us across.
<img src="3dlvl3.png" height="255" width="257" alt="example"/>
</p>
<p>
First, we need to make a control sector. This is a small, off map sector
that will contain the textures and attributes we'll need to make a 3D structure.
The size and shape of this sector does not matter. NOTE: I usually make
my control sectors a triangle and "point" them at whatever they effect.
It makes them easier to keep track of.
</p>
<p>
Now set sector F's floor height to -8 and it's ceiling height to 0, and
set both floor and ceiling textures to FLOOR4_8, and set F's light level
to 176. Then, select one of the linedefs, set the line special to 281 (281
is the linedef code for a solid, opaque, 3D floor) and tag it to sector
C.
</p>
<p>
Now sector F will be a "model" for a 3D floor in sector C. Sector F's floor
will be the model for the "bottom" of the 3D floor, and it's height and
texture will be used accordingly. The same applies for the ceiling of sector
F, it's ceiling texture and height will be used. The texture for the sides
of the 3D floor will be the middle texture of the linedef with the 281
special, and finally, the light level of sector F will be the light of
the shadow it casts.
</p>
<p>
What's left? Nothing! Run j00r map!
</p>

<h3>Chapter 4: What causes slowdowns</h3>

<p>
Slowdowns are caused mainly by overdraw. Overdraw means that a
pixel on the screen is drawn more than once. In the Doom renderer, overdraw 
is avoided almost completely by using 2D clipping. However, this method would
not be suitable for 3D floors so a new method had to be incorporated: sorting.
</p>
<p>
Sorting takes all the sprites and 3D floors and arranges them so 
that they will draw in the correct order. This method is not very time consuming
and works well for ordering the scene. Most of the time, this method works 
flawlessly. A few bugs remain here and there, but it's pretty solid.
</p>
<p>
Slowdowns related to 3D floors is generally caused by all the extra
scene components that Doom has to draw (i.e. 3D sides and all the extra 
floor/ceiling planes), and because of this, slowdown is generally related 
to two factors in your map: number of stacked 3D floors in a sector, and the number
of subsectors in a sector.
</p>
<p>
Controlling the number of subsectors a sector has is pretty much
impossible, because different node builders will chose different partition lines
to start building nodes with, which will lead to different subsector configurations.
However, you can control the number of linedefs in a 3D floor. If you create
a grate with a 3D floor, you will, in effect, create new subsectors. Keeping 3D objects
simple will help reduce rendering times.
</p>



<hr />
<h1><a name="media">Media</a></h1>
<p>
This section describes all the non-map data used by Legacy. This includes
textures, sounds, music, 3D models, sprites, colormaps etc.
</p>

<h2><a name="textures">Textures</a></h2>
<p>
Any and all of the sprites, patches, textures and flats in the IWAD can be replaced
using PWADs. 
In the following, we use the word "texture" for all graphics, not just the
ones defined in the TEXTUREx lumps.
</p>
<p>
The Legacy texture system is somewhat involved, which is caused by two main
reasons: The original Doom graphics formats have no
<a href="http://en.wikipedia.org/wiki/File_format#Magic_number">magic numbers</a> by
which they could be reliably identified, and there are certain nasty
texture namespace overlaps in the original IWADs.
Legacy follows the <a href="http://glbsp.sourceforge.net/JointTextureSpec.txt">JDS texture
standard</a>.</p>

<h3>Graphics formats</h3>
<p>
Doom natively supports two graphics formats: patches and flats. Doom Legacy
also supports the <b>PNG</b> and <b>JPEG</b> image formats.
</p>
<p>
<span class="keyword">Flats</span> are raw paletted images stored in a single lump. In the original Doom
all the floor and ceiling graphics had to be flats.
The lump only contains a width*height -sized array of one-byte palette indices.
Flats implicitly use the PLAYPAL palette. 
Flats contain no magic numbers and hence have to reside between the
<b>F_START</b> and <b>F_END</b>
(or FF_START and FF_END) markers. The supported flat sizes are 64*64,
128*64 and 128*128 texels. Flats cannot be used as parts of a sprite.
</p>
<p>
<span class="keyword">Patches</span> are a more advanced graphics format that
the original Doom used for building wall textures, sprites and menu images.
A patch consists of vertical runs of
pixels possibly separated by holes. In most Doom wad editors the holes are
denoted by the cyan color. Patches implicitly use the PLAYPAL palette.
Each patch is stored in its own lump. They have no magic numbers.
</p>
<p>
<span class="keyword">PNG</span> and <span class="keyword">JPEG</span>
(more accurately JPEG/JFIF)
are modern graphics formats that have magic numbers. They require no external
resources like a palette. They both support high color images and are compressed.
Moreover, PNG images can have an alpha channel which enables variable
transparency.
In Doom Legacy, each PNG or JPEG image should be stored in its own lump.
</p>
<p>
A good rule of the thumb for choosing between PNG and JPEG is that if you've
drawn the texture by hand, or it has transparency effects, you should save it
as PNG.
If it's based on a scanned image or a digital photo, it may work better as JPEG.
</p>

<h3>Texture definitions</h3>

<p>
Before a graphic can be used in a game, the game engine has to convert it into
a texture. In Doom Legacy there are several ways this can be done. One
important attribute of a texture is its <b>scaling</b>, i.e. how many texels
are rendered over unit map/screen length. By default the x and y scales are 1.
</p>

<p>
<span class="keyword">Doom Textures</span> are the textures defined in the
TEXTURE* and PNAMES lumps.
They are composed of one or more patches according to the TEXTURE* lumps.
There are some unused zero fields in the texture definition structs. One of
these has been adopted to set the scaling of the texture. However, Doom
Textures are not very flexible and they cannot use PNG or JPEG images.
</p>

<table class="def">
<caption>The maptexture_t struct</caption>
<tr><th>field</th><th>description</th></tr>
<tr><td>char[8]</td><td>texture name</td></tr>
<tr><td>Uint16</td><td>bit flags (currently unused, zero)</td></tr>
<tr><td>2 * Uint8</td><td>x scale, y scale in 5.3 fixed point
format. If zero, scale is 1.</td></tr>
<tr><td>2 * Uint16</td><td>texture width, height in pixels</td></tr>
<tr><td>Uint32</td><td>unused, zero</td></tr>
<tr><td>Uint16</td><td>patchcount</td></tr>
</table>


<p>
<span class="keyword">F_START textures</span> are textures consisting of a
single flat. Each lump between <b>F_START</b> and <b>F_END</b> markers is
converted into a F_START texture with the same name as the lump.
</p>

<p>
<span class="keyword">S_START textures</span> are textures consisting of a
single patch or an image with magic numbers. Each lump between <b>S_START</b> and <b>S_END</b> markers is
converted into a S_START texture with the same name as the lump. They are used
exclusively for sprite frames.
</p>

<p>
<span class="keyword">TX_START textures</span>
are built out of lumps residing between <b>TX_START</b> and <b>TX_END</b> markers.
Each of these lumps must contain a single graphic in a known image format that has magic numbers.
Each lump is converted into a texture that has the same name as the lump. The scaling is always 1.
If this is OK, TX_START is the quickest and easiest way to add high-color
textures to your WAD.
</p>

<p>
<span class="keyword">H_START textures</span>
are single-lump textures which must have magic numbers and reside
between <b>H_START</b> and <b>H_END</b> markers.
They work just like TX_START textures, except that the texture is scaled so
that its worldsize matches a Doom Texture or F_START texture with the same
name. Now read the previous sentence again. If no matching texture is found,
the H_START texture is discarded. If it is found, the H_START texture replaces
the original. H_START textures are meant for hi-res texture packs.
</p>

<p>
<span class="keyword">NTEXTURE textures</span>
are the most advanced and versatile type of textures Doom Legacy has to offer.
They are defined in a plaintext lump named NTEXTURE. It contains any number of
texture definitions, which look like this:
</p>
<div class="code">// this is a comment
texture MYNAME1 // the texture name 
{
    data LUMPNAME; // name of the lump containing the image
    worldsize X Y; // the world size into which the texture is scaled
    offset DX DY;  // optional internal offsets for the texture
}
</div>
<p>
Other texture properties will be added later.
</p>

<p>
<span class="keyword">NSPRITES textures</span>
are just like NTEXTURE textures, except that the definition lump is called
NSPRITES. Used exclusively for sprite frames.
</p>


<h3>Animated textures</h3>

<h3>ANIMDEFS lump</h3>

<p>
TODO explain
</p>

<h3>ANIMATED lump</h3>

<p>
TODO this too
</p>


<h2><a name="sprites">Sprites</a></h2>
<p>
Sprites are the objects used to represent mapthings in Doom. Each sprite
consists of several frames, each of which is a texture.
</p>
<p>
All the sprite definition lumps should be between the <b>S_START</b> and
<b>S_END</b> (or SS_START and SS_END) markers.
The marker lumps are not always necessary, but will make the sprite
loading faster.
Even more importantly, they prevent nasty errors stemming from the
fact that sprite lumps have a special naming convention in which the
first four characters define the sprite.
Without the markers, for example the PLAYPAL lump could be taken as a
part of the PLAYxxxx sprite, which would cause some confusing error messages.
</p>

<p>
When the sprite definition lumps are loaded, Legacy first looks for an NSPRITES
texture by that name, and then a S_START texture (which normally is stored in
that very lump).
That's right, you can leave the spriteframe lumps empty if you supply
the corresponding textures somewhere else. The lumps are only needed to
declare the existence of the particular frames.
</p>


<h2><a name="models">3D models</a></h2>
<p>
3D models are what modern FPS games use to represent nonfixed map objects.
Legacy knows how to use MD3 models. Yes, the ones from Quake III Arena.
The MD3s are assigned to different mapthings using
<a href="#DECORATE">DECORATE</a> lumps.
MD3 skins are technically textures.
</p>


<h2><a name="colormaps">Colormaps et al.</a></h2>
<p>
The Doom software renderer uses many different kinds of color mapping tables to
simulate lighting and color blending effects. The tables consist of indices
referring to palette colors.
</p>
<p>
A <b>colormap</b> is a 256-byte array used to remap the colors inside a palette:
<span class="example">newcolor = colormap[oldcolor]</span>.
</p>
<p>
The Doom software renderer uses a set of 34 different colormaps, called a
<b><a name="fadetable">fadetable</a></b> or a lighttable, to simulate different visibility levels.
The default fadetable is stored in the confusingly named COLORMAP lump.
One can also simulate colored lighting and fog using fadetables.
</p>
<p>
A <b>translation table</b> is a special kind of colormap which usually
only remaps a narrow range of colors inside a palette. Translation
tables are used i.a. to generate differently colored versions of the
sprites (in the case of the Doom marine, this happens by remapping the
green color range in the palette to something else).
</p>
<p>
A <b><a name="transmap">translucency map</a></b> is a 256-by-256 byte array used for
selective software translucency, where a background color is seen
through a translucent foreground:
<span class="example">newcolor = transmap[fg_color][bg_color]</span>.
You can visualize it as a set of 256 colormaps, one for each
foreground color. Boom (and hence Legacy) uses the lump TRANSMAP as
the default translucency map.
</p>

<p>TODO, C_START, C_END</p>



<h2><a name="sound">Sound</a></h2>

<h3>Audio formats</h3>
<p>
Legacy supports two sound formats: the native Doom one and <b>WAV/RIFF</b>.
</p>

<h3>SNDINFO lump</h3>
<p>
SNDINFO is a plaintext lump which defines the sound effects in
the game. Unlike normal WAD resources, SNDINFO lumps are
handled in a <b>cumulative</b>, not overriding, fashion.
The <a href="../resources/SNDINFO.txt">SNDINFO lump</a> in <b>legacy.wad</b> defines the basic sound effect
naming in Legacy. You can freely define new sound effects or change
the existing ones by using your own SNDINFO lumps.
</p>

<p>
Comments begin with a semicolon and end at the next newline.
</p>

<table class="def">
<tr><th>SNDINFO command</th><th>effect</th></tr>

<tr><td>&lt;sndname&gt; &lt;lumpname&gt;<br/>
[m&lt;n&gt;] [r&lt;n&gt;] [p&lt;n&gt;]</td>
<td>
Assigns the sound in the lump &lt;lumpname&gt; to the logical sound
name &lt;sndname&gt;.<br/>
Optionally, you can also set the <b>m</b>ultiplicity,
p<b>r</b>iority or the <b>p</b>itch of the effect.
</td></tr>

<tr><td>&lt;sndname&gt;  = &lt;alias&gt;</td>
<td>
Defines an alias for a logical sound name. This is mainly for
Hexen compatibility, map authors shoud not need to use this.
</td></tr>

<tr><td>$multiplicity &lt;0-255&gt;</td>
<td>
Set the default multiplicity of the consequent sound effects.
Zero means not limited.
</td></tr>

<tr><td>$priority &lt;0-255&gt;</td>
<td>
Set the default relative importance of the sound effects.
</td></tr>

<tr><td>$pitch &lt;-128 - +127&gt;</td>
<td>
Set the default pitch change for the sounds. 64 pitch units equal an octave.
</td></tr>


<tr><td>$ifdoom</td>
<td>
Starts a conditional block that is only executed when in Doom mode.
</td></tr>


<tr><td>$ifheretic</td>
<td>
Also these conditionals...
</td></tr>

<tr><td>$ifhexen</td>
<td>
...are available.
</td></tr>

<tr><td>$endif</td>
<td>
Ends a conditional block.
</td></tr>

</table>

<h3>SNDSEQ lump</h3>

<p>
The SNDSEQ lump is used to define sequences of sound effects for
doors, moving platforms, ambiance etc. You can think of them as very
simple scripts. All the SNDSEQ commands refer to logical sound names,
as defined in SNDINFO.
Like SNDINFO, SNDSEQ lumps are read in a cumulative fashion.
See the SNDSEQ lump in <a href="#legacy.wad">legacy.wad</a> for an example.
</p>

<p>
Again, semicolons start comments, which end at the next newline.
</p>

<table class="def">
<tr><th>SNDSEQ command</th><th>effect</th></tr>

<tr><td>:&lt;seqname&gt; &lt;number&gt;</td>
<td>
Starts a sound sequence definition. The beginning colon is
essential. Each sequence must have a unique (positive) number.
</td></tr>

<tr><td>play &lt;sndname&gt;</td>
<td>
Starts playing the sound effect, moves immediately to the next command.
</td></tr>

<tr><td>delay &lt;ticks&gt;</td>
<td>
Waits a number of ticks before continuing the script.
</td></tr>

<tr><td>delayrand &lt;min&gt; &lt;max&gt;</td>
<td>
Waits a random number of ticks before continuing the script.
</td></tr>

<tr><td>playtime &lt;sndname&gt; &lt;ticks&gt;</td>
<td>
Like a play command followed by a delay command.
</td></tr>

<tr><td>playuntildone &lt;sndname&gt;</td>
<td>
Starts playing the sound, moves forward when it has finished.
</td></tr>

<tr><td>playrepeat &lt;sndname&gt;</td>
<td>
Starts playing the sound repeatedly. This effectively halts the script.
</td></tr>

<tr><td>volume &lt;0-100&gt;</td>
<td>
Sets the sound volume.
</td></tr>

<tr><td>volumerand &lt;min&gt; &lt;max&gt;</td>
<td>
Sets the sound volume randomly.
</td></tr>

<tr><td>chvol &lt;n&gt;</td>
<td>
Changes the sound volume by the relative amount n.
</td></tr>

<tr><td>stopsound &lt;sndname&gt;</td>
<td>
Defines the sound to be played when the sequence is stopped (e.g. the
sound of a door slamming shut).
</td></tr>

<tr><td>end</td>
<td>
Ends the sound sequence definition.
</td></tr>
</table>


<h2><a name="music">Music</a></h2>
<p>
Legacy supports the MUS, MIDI, MP3 and Ogg Vorbis music formats, as well as
several module formats, using
the SDL_mixer library. The music lump format is detected
automagically. The names of the music lumps can be
<b>chosen freely</b>, they do not have to start with "D_".
</p>



<hr />
<h1><a name="advanced">Advanced topics</a></h1>
<p>
This section handles some of the more advanced editing topics, such as
FS and ACS scripting and the DECORATE and DeHackEd data definition languages.
</p>

<h2><a name="scripting">Scripting</a></h2>
<p>
Legacy supports two scripting languages,
<a href="fs.html">FraggleScript</a> and
<a href="">ACS</a>.
Both languages can be used in all types of maps,
even simultaneously if needed.
FraggleScript is stored in the <b>[scripts]</b>
blocks of the <a name="levelinfo">LevelInfo</a> lumps, whereas ACS
goes to the <b>BEHAVIOR</b> lumps. FS is an interpreted language and hence
can be inserted into the wad as plaintext, whereas ACS must first be
compiled into bytecode using <b>ACC</b>, the ACS compiler.
</p>


<h2><a name="DECORATE">DECORATE</a></h2>
<p>
DECORATE is a language for defining mapthing properties, introduced by ZDoom.
TODO
</p>


<h2><a name="dehacked">DeHackEd and BEX</a></h2>
<p>
Legacy supports the most important DeHackEd and BEX (Boom EXtensions
to DeHackEd) features.
Some of the features are <b>deprecated</b>, which means that you should not
use them since there is a better way to achieve the same effect.
We may also stop supporting them in future releases.
</p>

<table class="def">
<tr><th>Feature</th><th>Support status</th><th>Notes</th></tr>
<tr><td>Thing</td><td>full</td><td>BEX flag mnemonics are
supported, with extensions.</td></tr>
<tr><td>Frame</td><td>full</td><td>Extension: Codepointer can be set using "codep &lt;codepointer_mnemonic&gt;".</td></tr>
<tr><td>Weapon</td><td>full</td></tr>
<tr><td>Ammo</td><td>full</td></tr>
<tr><td>Sprite</td><td>full</td></tr>
<tr><td>Misc</td><td>partial</td></tr>
<tr><td>Cheat</td><td>partial</td></tr>
<tr><td>Pointer</td><td>deprecated</td><td>Use [CODEPTR] or the Frame
extension instead.</td></tr>
<tr><td>Sound</td><td>deprecated</td><td>Use <a href="#sound">SNDINFO</a> instead.</td></tr>
<tr><td>Text</td><td>deprecated</td><td>Use [STRINGS] or
<a href="#MAPINFO">MAPINFO</a> instead.</td></tr>
<tr><td>[CODEPTR]</td><td>full</td><td>Extended with a few
Legacy-specific codepointers.</td></tr>
<tr><td>[STRINGS]</td><td>partial</td><td>Use <a href="#MAPINFO">MAPINFO</a>
for intermission texts and nice mapnames.</td></tr>
<tr><td>[PARS]</td><td>deprecated</td><td>Use <a href="#MAPINFO">MAPINFO</a> instead.</td></tr>
</table>


<h3>Frames and codepointers</h3>

<p>
Unfortunately the DeHackEd terminology is
quite different from the Doom source code terminology. In the
following, the source code terms are written in <b>bold</b>,
followed by the corresponding DeHackEd terms (in parentheses).
</p>

<p>
In Doom, the mapthing AI is basically a finite state machine.
The behavior and animation of the things is controlled by a
<b>state table</b> (frame table), which is an array of <b>states</b>
(frames). Each state consists of the following data fields:
<b>sprite</b> number, <b>frame</b> number (sprite subnumber),
duration in <b>tics</b>, <b>nextstate</b> number (next frame)
and <b>action function</b> pointer (codepointer).
</p>

<p>
The sprite and frame numbers determine the graphical presentation
associated with this state (what it looks like).
Duration is self-explanatory. Nextstate is the number of the state the
thing will move into next. The action function pointer points to an
<b>action function</b> that will be called on the thing each time it enters
the state. The pointer can also be NULL, in which case no function is
called.
</p>

<p>
The preferred way to change the codepointers is to use the BEX
mnemonics.
The complete list of mnemonics for the Doom, Heretic
and Hexen action functions available can be found in the source file
<a href="../include/a_functions.h">a_functions.h</a>. Remember that
you can use the mnemonic <b>NULL</b> to clear a codepointer.<br />
Legacy also has introduced a few new action functions, which can only
be accessed using their mnemonics:
</p>

<table class="def">
<tr><th>BEX mnemonic</th><th>effect</th></tr>

<tr><td>StartFS</td>
<td>
Starts an FS script, using <b>tics</b> for the script number. The
actual duration of the state is always zero.
</td></tr>

<tr><td>StartWeaponFS</td>
<td>
Same thing, but for weapon frames.
</td></tr>

<tr><td>StartACS</td>
<td>
Starts an ACS script, using <b>tics</b> for the script number,
<b>frame</b>
for the args??? TODO
</td></tr>

<tr><td>StartWeaponACS</td>
<td>
Same as above, but for weapon frames.
</td></tr>
</table>



<h3>Item pickups</h3>

<p>
If a mapthing has the flag <b>SPECIAL</b>, the player may pick it up.
Unlike the original Doom, Legacy does not determine the type of a
mapthing by its sprite, but rather by its mobjtype number.
The effects of the basic Doom/Heretic/Hexen pickups are hardcoded.
However, the pickup system has been made more flexible in some
ways.
Where applicable, the <b>health</b> field of an item mapthing
determines the pickup's &quot;size&quot;, be it health, armor points
or ammo.
</p>

<p>
You can also create completely new types of pickups by combining DeHackEd with
scripting. If a mapthing has both the SPECIAL flag and a nonzero
<b>missile damage</b>, it becomes a scripted pickup. When the player
touches it, the game runs the FS script whose number corresponds to
the missile damage of the mapthing. Original hardcoded behavior, if
any, is completely bypassed.
</p>

<!-- table class="def">
<tr><th>DeHackEd field</th><th>Suggested usage</th><th>May not be used with...</th></tr>
<tr><td>Hit points*</td><td>An integer amount. (Health/armor/ammo...)</td><td>SHOOTABLE</td></tr>
<tr><td>Reaction time*</td><td>A counter.</td><td>FLOATBOB</td></tr>
<tr><td>Pain chance</td><td>A probability (0-255)</td><td>SHOOTABLE</td></tr>
<tr><td>Speed</td><td>Fixed point quantity, quality (armor factor...)</td><td>MISSILE</td></tr>
<tr><td>Missile damage</td><td>An integer amount</td><td>MISSILE, SKULLFLY</td></tr>
</table -->

<p>
TODO more howtos: creating a new weapon with scripting, new monsters...
</p>


<h3>DeHackEd with Heretic and Hexen frames</h3>

<p>
The Heretic and Hexen frame tables are also included in Legacy. They
are always available, even in pure Doom games. One can refer to the
Heretic frames using the letter <b>H</b> as a prefix to the frame
number. Similarly, the Hexen states are referred to using the letter
<b>X</b> as a prefix. This has a twofold motive: Now you can modify
Heretic and Hexen games using DeHackEd, but you can also simply use
the extra states for creating more complex mapthing behavior.
</p>

<h3>Caveat</h3>
<p>DeHackEd, even when improved with BEX, is somewhat
clumsy, convoluted and unappealing to novice map authors.
Since most "oldskool" map authors like it and plenty of WADs with
DeHackEd content are available, we'll try to support it in future
releases as well.<br/>
However, eventually we intend to add more <a href="#DECORATE">DECORATE</a> support, which will hopefully obsolete DeHackEd altogether.
</p>

<p>
Here is an <a href="example.deh">example DEH file</a> which illustrates the new features.
</p>


<hr />
<h2><a name="legacy.wad">Legacy.wad contents</a></h2>

<p>
Naturally, you can also replace these resources using PWADs.
</p>

<table class="def">
<tr><th>lump</th><th>contents</th></tr>

<tr><td class="note" colspan="2">
Plaintext lumps
</td></tr>

<tr><td><a href="../resources/VERSION.txt">VERSION</a></td>
<td>
Legacy.wad version string
</td></tr>

<tr><td><a href="../resources/MAPINFO_Doom.txt">MI_DOOM1</a></td>
<td>
MAPINFO lump for Doom1
</td></tr>

<tr><td><a href="../resources/MAPINFO_Doom2.txt">MI_DOOM2</a></td>
<td>
MAPINFO lump for Doom2
</td></tr>

<tr><td><a href="../resources/MAPINFO_Evilution.txt">MI_TNT</a></td>
<td>
MAPINFO lump for the Doom2 mission pack "TNT Evilution"
</td></tr>

<tr><td><a href="../resources/MAPINFO_Plutonia.txt">MI_PLUT</a></td>
<td>
MAPINFO lump for the Doom2 mission pack "Plutonia Experiment"
</td></tr>

<tr><td><a href="../resources/MAPINFO_Heretic.txt">MI_HTIC</a></td>
<td>
MAPINFO lump for Heretic
</td></tr>

<tr><td><a href="../resources/SNDINFO.txt">SNDINFO</a></td>
<td>
Basic sound effect definitions
</td></tr>

<tr><td><a href="../resources/SNDSEQ.txt">SNDSEQ</a></td>
<td>
Basic sound sequence definitions
</td></tr>

<tr><td><a href="../resources/FS_things.h">THINGS.H</a></td>
<td>
<a href="fs.html">FraggleScript</a> header file containing THING names
and flags
</td></tr>

<tr><td>ENDOOM</td>
<td>
End text
</td></tr>


<tr><td class="note" colspan="2">
Binary lumps
</td></tr>

<tr><td><a href="../resources/doom2hexen.txt">XDOOM</a></td>
<td>
Doom-to-Hexen linedeftype conversion table. Generated using tools/doom2hexen.exe.
</td></tr>

<tr><td><a href="../resources/heretic2hexen.txt">XHERETIC</a></td>
<td>
Heretic-to-Hexen linedeftype conversion table
</td></tr>



<tr><td class="note" colspan="2">
Default data items
</td></tr>

<tr><td>DEF_SND</td>
<td>
Default sound effect
</td></tr>

<tr><td><a href="../resources/DEF_texture.png">DEF_TEX</a></td>
<td>
Default texture
</td></tr>


<tr><td class="note" colspan="2">
<a href="#fadetable">Fadetables</a> and <a href="#transmap">translucency maps</a>
</td></tr>

<tr><td>WATERMAP</td>
<td>
Boom underwater lightmap/fadetable.
</td></tr>

<tr><td>
TRANSMED
TRANSMOR
TRANSHI
TRANSFIR
TRANSFX1
</td>
<td>
<a name="legacy_transmaps">Maps</a> for default software translucency.
</td></tr>



<tr><td class="note" colspan="2">
Sounds
</td></tr>

<tr><td>
DSOUCH
DSJUMP
DSFLOUSH
DSGLOOP
DSSPLASH
</td>
<td>
New player and environment sounds
</td></tr>



<tr><td class="note" colspan="2">
Sprites
</td></tr>

<tr><td>BLUD[ab]0</td>
<td>
Blood
</td></tr>

<tr><td>SMOK[a-e]0</td>
<td>
Smoke
</td></tr>

<tr><td>SPLA[a-c]0</td>
<td>
Water splash?
</td></tr>

<tr><td>TNT1A0</td>
<td>
?
</td></tr>



<tr><td class="note" colspan="2">
Other graphics
</td></tr>

<tr><td>CREDIT</td>
<td>
Credits page
</td></tr>

<tr><td>CORONA</td>
<td>
Corona luminosity map
</td></tr>

<tr><td>CROSHAI[1-3]</td>
<td>
HUD crosshairs
</td></tr>

<tr><td>
BRDR_MM
BRDR_MT
</td>
<td>
window border patches?
</td></tr>

<tr><td>A_DMG[1-3]</td>
<td>
Wall splat patches
</td></tr>


<tr><td>WATER[0-7]</td>
<td>
"old water" flats
</td></tr>

<tr><td>
M_CONTROL
M_CDVOL
M_VIDEO
M_SINGLE
M_MULTI
M_SETUPM
M_SETUPA
M_SETUPB
M_2PLAYR
M_STSERV
M_CONNEC
M_SLIDEL
M_SLIDER
M_SLIDEC
</td>
<td>
Menu patches
</td></tr>

<tr><td>RANKINGS</td>
<td>
the graphic displayed at the top of the deathmatch
rankings (while in a net-game)
</td></tr>

<tr><td>RSKY[1-3]</td>
<td>
The sky graphics are now 256x240, not 256x128.
That's because of the freelook : you are able to look
higher, thus seeing a part of the sky you couldn't see
in the original Doom.

Using a taller graphic is better than scaling up the
original skies, it looks better. However for compatibility,
Legacy scales up the SKY textures if it finds that they
are the 'old' small size 256x128.

The bottom 40 lines are under the horizon and not
normally seen. The lines 100 to 199 are the ones
you see while looking straight ahead. The top lines
0-99 are the lines of sky you see when looking up.
</td></tr>


<tr><td>CONSBACK</td>
<td>
Console background picture, 320x200, when 'con_backpic' is true (the console
variable) also used as the loading picture MUST BE 200 lines high, can
be any width (default is 320)
</td></tr>

<tr><td>CBLEFT</td>
<td>
Console left border, used with translucent console
background MUST BE 200 lines high, any width (default is 8)
</td></tr>

<tr><td>CBRIGHT</td>
<td>
Console rigth border, used with translucent console background MUST BE 200 lines high, any width (default is 8)
</td></tr>

<tr><td class="note" colspan="2">
Status bar overlay icons
</td></tr>


<tr><td>SBOHEALT</td><td>health (default shows a red cross)</td></tr>
<tr><td>SBOFRAGS</td><td>frags (default shows a skull)</td></tr>
<tr><td>SBOARMOR</td><td>armor (default shows a green armor)</td></tr>
<tr><td>SBOAMMO1</td><td>bullets</td></tr>
<tr><td>SBOAMMO2</td><td>shotgun shells</td></tr>
<tr><td>SBOAMMO3</td><td>power cells</td></tr>
<tr><td>SBOAMMO4</td><td>rockets</td></tr>

<tr><td></td>
<td>
</td></tr>

</table>


</body>
</html>

